{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://bgc.dev/schemas/v1/market-size-response.json",
  "title": "Market Size Response",
  "description": "Schema for market size calculation response",
  "type": "object",
  "properties": {
    "data": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/MarketItem"
      },
      "description": "List of market size items"
    },
    "metadata": {
      "type": "object",
      "properties": {
        "metric": {
          "type": "string",
          "enum": ["TAM", "SAM", "SOM"]
        },
        "year_from": {
          "type": "integer"
        },
        "year_to": {
          "type": "integer"
        },
        "ncm_chapter": {
          "type": "string"
        },
        "scenario": {
          "type": "string",
          "enum": ["base", "aggressive"]
        },
        "total_count": {
          "type": "integer",
          "description": "Total number of items in response"
        },
        "total_value_usd": {
          "type": "number",
          "description": "Sum of all market values in USD"
        }
      },
      "required": ["metric", "year_from", "year_to", "total_count"]
    }
  },
  "required": ["data", "metadata"],
  "definitions": {
    "MarketItem": {
      "type": "object",
      "properties": {
        "year": {
          "type": "integer",
          "description": "Year of the market data"
        },
        "ncm_chapter": {
          "type": "string",
          "pattern": "^[0-9]{2}$",
          "description": "NCM chapter (2 digits)"
        },
        "chapter_description": {
          "type": "string",
          "description": "Human-readable description of the NCM chapter"
        },
        "export_value_usd": {
          "type": "number",
          "minimum": 0,
          "description": "Export value in USD"
        },
        "import_value_usd": {
          "type": "number",
          "minimum": 0,
          "description": "Import value in USD"
        },
        "total_value_usd": {
          "type": "number",
          "minimum": 0,
          "description": "Total market value (export + import) in USD"
        }
      },
      "required": ["year", "ncm_chapter", "total_value_usd"]
    }
  }
}
